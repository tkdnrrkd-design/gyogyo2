<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì˜ì–´ ë‹¨ì–´ í…ŒíŠ¸ë¦¬ìŠ¤</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f8ff;
        text-align: center;
    }

    canvas {
        background: #fff;
        border: 3px solid #333;
        margin-top: 10px;
    }

    #info {
        font-size: 20px;
        margin-top: 10px;
    }

    #score {
        font-size: 18px;
        margin-top: 5px;
    }
</style>
</head>
<body>

<h1>ğŸ§± ì˜ì–´ ë‹¨ì–´ í…ŒíŠ¸ë¦¬ìŠ¤</h1>
<p>ëœ»ì— ë§ëŠ” ì˜ì–´ ë‹¨ì–´ ë¸”ë¡ì„ ë–¨ì–´ëœ¨ë¦¬ì„¸ìš”!</p>

<div id="info"></div>
<canvas id="game" width="300" height="500"></canvas>
<div id="score">ì ìˆ˜: 0</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const COLS = 6;
const ROWS = 10;
const SIZE = 50;

const words = [
    { en: "apple", ko: "ì‚¬ê³¼" },
    { en: "dog", ko: "ê°•ì•„ì§€" },
    { en: "car", ko: "ìë™ì°¨" },
    { en: "sun", ko: "í•´" },
    { en: "book", ko: "ì±…" }
];

let score = 0;
let board = Array.from({ length: ROWS }, () => Array(COLS).fill(null));
let current = null;
let currentWord = null;

// ìƒˆ ë¬¸ì œ
function newQuestion() {
    currentWord = words[Math.floor(Math.random() * words.length)];
    document.getElementById("info").textContent =
        `ğŸ‘‰ ëœ»: ${currentWord.ko}`;
}

// ìƒˆ ë¸”ë¡
function newBlock() {
    const word = words[Math.floor(Math.random() * words.length)];
    current = {
        x: Math.floor(COLS / 2),
        y: 0,
        word: word.en
    };
}

// ê·¸ë¦¬ê¸°
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ë³´ë“œ
    for (let y = 0; y < ROWS; y++) {
        for (let x = 0; x < COLS; x++) {
            if (board[y][x]) drawBlock(x, y, board[y][x]);
        }
    }

    // í˜„ì¬ ë¸”ë¡
    if (current) drawBlock(current.x, current.y, current.word);
}

function drawBlock(x, y, text) {
    ctx.fillStyle = "#d0ebff";
    ctx.fillRect(x * SIZE, y * SIZE, SIZE, SIZE);
    ctx.strokeRect(x * SIZE, y * SIZE, SIZE, SIZE);

    ctx.fillStyle = "#000";
    ctx.font = "14px Arial";
    ctx.textAlign = "center";
    ctx.fillText(text, x * SIZE + SIZE / 2, y * SIZE + SIZE / 2 + 5);
}

// ì¶©ëŒ
function collide(x, y) {
    if (y >= ROWS || x < 0 || x >= COLS) return true;
    if (board[y][x]) return true;
    return false;
}

// ê³ ì •
function freeze() {
    board[current.y][current.x] = current.word;

    // ì •ë‹µ ì²´í¬
    if (current.word === currentWord.en) {
        score += 10;
        newQuestion();
    } else {
        score -= 5;
    }

    document.getElementById("score").textContent = `ì ìˆ˜: ${score}`;
    newBlock();
}

// ë–¨ì–´ëœ¨ë¦¬ê¸°
function drop() {
    if (!collide(current.x, current.y + 1)) {
        current.y++;
    } else {
        freeze();
    }
}

// í‚¤ë³´ë“œ
document.addEventListener("keydown", e => {
    if (!current) return;

    if (e.key === "ArrowLeft" && !collide(current.x - 1, current.y)) {
        current.x--;
    }
    if (e.key === "ArrowRight" && !collide(current.x + 1, current.y)) {
        current.x++;
    }
    if (e.key === "ArrowDown") {
        drop();
    }
});

// ê²Œì„ ë£¨í”„
function loop() {
    drop();
    draw();
}

newQuestion();
newBlock();
setInterval(loop, 800);
</script>

</body>
</html>
